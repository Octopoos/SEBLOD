/*
 * Inline Form Validation Engine 2.6.2, jQuery plugin * Copyright(c) 2010, Cedric Dugas * http://www.position-absolute.com * 2.0 Rewrite by Olivier Refalo * http://www.crionics.com * Form validation engine allowing custom regex rules to be added. * Licensed under the MIT License
 * Modified by sebastienheraud for SEBLOD (App Builder & CCK) // SEBLOD nano (Form Builder).
 */
(function($){$.fn.validationEngineLanguage = function(){};$.validationEngineLanguage = {newLang: function(moreRules){allRules = {};$.validationEngineLanguage.allRules = $.extend(allRules, moreRules);}};})(jQuery);
 !function(k){"use strict";var T={init:function(e){var t=this;return k("#"+k(this).attr("id")+" .cck-tab-required").removeClass("cck-tab-required"),k("#"+k(this).attr("id")+" .cck-tab-info").remove(),t.data("jqv")&&null!=t.data("jqv")||(e=T._saveOptions(t,e),k("body").on("click",".formError",function(){k(this).fadeOut(150,function(){k(this).parent(".formErrorOuter").remove(),k(this).remove()})}),k("body").on("shown",'li a[data-toggle="tab"]',function(e){k(t).validationEngine("hideAll"),k(this).parent().hasClass("cck-tab-required")&&setTimeout(function(){k(t).validationEngine("validate")},50)})),this},attach:function(e){var t=this,e=e?T._saveOptions(t,e):t.data("jqv");return e.validateAttribute=t.find("[data-validation-engine*=validate]").length?"data-validation-engine":"class",e.binded&&(t.on(e.validationEventTrigger,"["+e.validateAttribute+"*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)",T._onFieldEvent),t.on("click","["+e.validateAttribute+"*=validate][type=checkbox],["+e.validateAttribute+"*=validate][type=radio]",T._onFieldEvent),t.on(e.validationEventTrigger,"["+e.validateAttribute+"*=validate][class*=datepicker]",{delay:300},T._onFieldEvent)),e.autoPositionUpdate&&k(window).bind("resize",{noAnimation:!0,formElem:t},T.updatePromptsPosition),t.on("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",T._submitButtonClick),t.removeData("jqv_submitButton"),t.on("submit",T._onSubmitEvent),this},detach:function(){var e=this,t=e.data("jqv");return e.find("["+t.validateAttribute+"*=validate]").not("[type=checkbox]").off(t.validationEventTrigger,T._onFieldEvent),e.find("["+t.validateAttribute+"*=validate][type=checkbox],[class*=validate][type=radio]").off("click",T._onFieldEvent),e.off("submit",T.onAjaxFormComplete),e.off("submit",T.onAjaxFormComplete),e.removeData("jqv"),e.off("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",T._submitButtonClick),e.removeData("jqv_submitButton"),t.autoPositionUpdate&&k(window).unbind("resize",T.updatePromptsPosition),this},validate:function(e){var t,a,e=e||"form.save",i=k(this),r=null;return!i.is("form")&&!i.hasClass("validationEngineContainer")||i.hasClass("validating")?i.is("form")||i.hasClass("validationEngineContainer")?(a=i.data("jqv"),i.removeClass("validating")):(a=(t=i.closest("form, .validationEngineContainer")).data("jqv")?t.data("jqv"):k.validationEngine.defaults,(r=T._validateField(i,a))&&a.onFieldSuccess?a.onFieldSuccess():a.onFieldFailure&&0<a.InvalidFields.length&&a.onFieldFailure()):(i.addClass("validating"),a=i.data("jqv"),r=T._validateFields(this),setTimeout(function(){i.removeClass("validating")},100),r&&a.onSuccess?a.onSuccess():!r&&a.onFailure&&a.onFailure()),a.onValidationComplete?!!a.onValidationComplete(t,r):(-1!=e.indexOf("JCck.")?(a.submitPkg=e,a.submitFct="",a.submitTask=""):a.submitTask=e,a.eventTrigger="submit",r)},updatePromptsPosition:function(e){var i,r;e&&this==window?(r=e.data.formElem,i=e.data.noAnimation):r=k(this.closest("form, .validationEngineContainer"));var o=r.data("jqv");return r.find("["+o.validateAttribute+"*=validate]").not(":disabled").each(function(){var e=k(this);o.prettySelect&&e.is(":hidden")&&(e=r.find("#"+o.usePrefix+e.attr("id")+o.useSuffix));var t=T._getPrompt(e),a=k(t).find(".formErrorContent").html();t&&T._updatePrompt(e,k(t),a,void 0,!1,o,i)}),this},showPrompt:function(e,t,a,i){var r=(r=this.closest("form, .validationEngineContainer").data("jqv"))||T._saveOptions(this,r);return a&&(r.promptPosition=a),r.showArrow=1==i,T._showPrompt(this,e,t,!1,r),this},hide:function(){var e=k(this).closest("form, .validationEngineContainer").data("jqv"),t=e&&e.fadeDuration?e.fadeDuration:.3,e=k(this).is("form")||k(this).hasClass("validationEngineContainer")?"parentForm"+T._getClassName(k(this).attr("id")):T._getClassName(k(this).attr("id"))+"formError";return k("."+e).fadeTo(t,.3,function(){k(this).parent(".formErrorOuter").remove(),k(this).remove()}),this},hideAll:function(){var e=this.data("jqv"),e=e?e.fadeDuration:10;return k(".formError").fadeTo(e,0,function(){k(this).parent(".formErrorOuter").remove(),k(this).remove()}),this},_onFieldEvent:function(e){var t=k(this),a=t.closest("form, .validationEngineContainer").data("jqv");a.eventTrigger="field",window.setTimeout(function(){T._validateField(t,a),0==a.InvalidFields.length&&a.onFieldSuccess?a.onFieldSuccess():0<a.InvalidFields.length&&a.onFieldFailure&&a.onFieldFailure()},e.data?e.data.delay:0)},_onSubmitEvent:function(){var e=k(this),t=e.data("jqv");if(e.data("jqv_submitButton")){var a=k("#"+e.data("jqv_submitButton"));if(a&&0<a.length&&(a.hasClass("validate-skip")||"true"==a.attr("data-validation-engine-skip")))return!0}t.eventTrigger="submit";a=T._validateFields(e);return a&&t.ajaxFormValidation?(T._validateFormWithAjax(e,t),!1):t.onValidationComplete?!!t.onValidationComplete(e,a):a},_checkAjaxStatus:function(e){var a=!0;return k.each(e.ajaxValidCache,function(e,t){if(!t)return a=!1}),a},_checkAjaxFieldStatus:function(e,t){return 1==t.ajaxValidCache[e]},_validateFields:function(a){var i=a.data("jqv"),r=!1;a.trigger("jqv.form.validating");var o=null;if(a.find("["+i.validateAttribute+"*=validate]").not(":disabled").each(function(){var e=k(this),t=[];if(k.inArray(e.attr("name"),t)<0)return(r|=T._validateField(e,i))&&null==o&&(o=e.is(":hidden")&&i.prettySelect?e=a.find("#"+i.usePrefix+T._jqSelector(e.attr("id"))+i.useSuffix):e),!i.doNotShowAllErrosOnSubmit&&(t.push(e.attr("name")),(1!=i.showOneMessage||!r)&&void 0)}),a.trigger("jqv.form.result",[r]),r){if(i.scroll){var e=o.offset().top,t=o.offset().left,n=i.promptPosition;if("string"==typeof n&&-1!=n.indexOf(":")&&(n=n.substring(0,n.indexOf(":"))),"bottomRight"==n||"bottomLeft"==n||(l=T._getPrompt(o))&&(e=l.offset().top),i.scrollOffset&&(e-=i.scrollOffset),i.isOverflown){var l=k(i.overflownDIV);if(!l.length)return!1;e+=l.scrollTop()+-parseInt(l.offset().top)-5,k(i.overflownDIV+":not(:animated)").animate({scrollTop:e},1100,function(){i.focusFirstField&&o.focus()})}else k("html, body").animate({scrollTop:e},1100,function(){i.focusFirstField&&o.focus()}),k("html, body").animate({scrollLeft:t},1100)}else i.focusFirstField&&o.focus();return!1}return!0},_validateFormWithAjax:function(l,s){var e=l.serialize(),t=s.ajaxFormValidationMethod||"GET",a=s.ajaxFormValidationURL||l.attr("action"),d=s.dataType||"json";k.ajax({type:t,url:a,cache:!1,dataType:d,data:e,form:l,methods:T,options:s,beforeSend:function(){return s.onBeforeAjaxFormValidation(l,s)},error:function(e,t){T._ajaxError(e,t)},success:function(e){if("json"==d&&!0!==e){for(var t=!1,a=0;a<e.length;a++){var i,r=e[a],o=r[0],n=k(k("#"+o)[0]);1==n.length&&(o=r[2],1==r[1]?""!=o&&o?(s.allrules[o]&&(i=s.allrules[o].alertTextOk)&&(o=i),s.showPrompts&&T._showPrompt(n,o,"pass",!1,s,!0)):T._closePrompt(n):(t|=!0,s.allrules[o]&&(i=s.allrules[o].alertText)&&(o=i),s.showPrompts&&T._showPrompt(n,o,"",!1,s,!0)))}s.onAjaxFormComplete(!t,l,e,s)}else s.onAjaxFormComplete(!0,l,e,s)}})},_checkFieldDisplayStatus:function(e,t){var a=(r=e.closest(".cck-tab-pane")).index();if(t){if(r.length){t=r.parent().prev(".cck-tabs");if(t.length)return t[0].id}}else if(r.is(":hidden")){e=e.parents().filter(function(){return"none"==k(this).css("display")}).first();if(r.attr("id")==e.attr("id"))return(i={}).tab=r,i.pos=a,i;if(k("#"+e.attr("id")+" .cck-tabs").length){var i,r=k("#"+e.attr("id"));return(i={}).tab=r,i.pos=r.index(),i}}return!1},_validateField:function(e,t,a){e.attr("id")||(e.attr("id","form-validation-field-"+k.validationEngine.fieldIdCounter),++k.validationEngine.fieldIdCounter);var i=!1;if(!e.is(":hidden")||(i=T._checkFieldDisplayStatus(e,!1))||(t.validateNonVisibleFields||t.prettySelect)&&!e.parent().is(":hidden")){var r=e.attr(t.validateAttribute),o=/validate\[(.*)\]/.exec(r);if(!o)return!1;var n=o[1].split(/\[|,|\]/),l=e.attr("name"),s="",d="",u=!1,c=!1;t.isError=!1,t.showArrow=!0,0<t.maxErrorsPerField&&(c=!0);for(var f=k(e.closest("form, .validationEngineContainer")),p=0;p<n.length;p++)n[p]=n[p].replace(" ",""),""===n[p]&&delete n[p];for(var p=0,v=0;p<n.length;p++){if(c&&v>=t.maxErrorsPerField){u||(u=-1!=(_=k.inArray("required",n))&&p<=_);break}var m=void 0;switch(n[p]){case"required":u=!0,m=T._required(e,n,p,t);break;case"require":u=!0,m=T._require(e,n,p,t);break;case"custom":m=T._custom(e,n,p,t);break;case"groupRequired":var h="["+t.validateAttribute+"*="+n[p+1]+"]";(g=f.find(h).eq(0))[0]!=e[0]&&(T._validateField(g,t,a),t.showArrow=!0),(m=T._groupRequired(e,n,p,t))&&(u=!0),t.showArrow=!1;break;case"groupRequire":var g,h="["+t.validateAttribute+"*="+n[p+1]+"]";(g=f.find(h).eq(0))[0]!=e[0]&&(T._validateField(g,t,a),t.showArrow=!0),(m=T._groupRequire(e,n,p,t))&&(u=!0),t.showArrow=!1;break;case"ajax":(m=T._ajax(e,n,p,t))&&(d="load");break;case"minSize":m=T._minSize(e,n,p,t);break;case"maxSize":m=T._maxSize(e,n,p,t);break;case"min":m=T._min(e,n,p,t);break;case"max":m=T._max(e,n,p,t);break;case"past":m=T._past(f,e,n,p,t);break;case"future":m=T._future(f,e,n,p,t);break;case"isFuture":m=T._isFuture(f,e,n,p,t);break;case"dateRange":h="["+t.validateAttribute+"*="+n[p+1]+"]";t.firstOfGroup=f.find(h).eq(0),t.secondOfGroup=f.find(h).eq(1),(t.firstOfGroup[0].value||t.secondOfGroup[0].value)&&(m=T._dateRange(e,n,p,t)),m&&(u=!0),t.showArrow=!1;break;case"dateTimeRange":h="["+t.validateAttribute+"*="+n[p+1]+"]";t.firstOfGroup=f.find(h).eq(0),t.secondOfGroup=f.find(h).eq(1),(t.firstOfGroup[0].value||t.secondOfGroup[0].value)&&(m=T._dateTimeRange(e,n,p,t)),m&&(u=!0),t.showArrow=!1;break;case"maxCheckbox":e=k(f.find("input[name='"+l+"']")),m=T._maxCheckbox(f,e,n,p,t);break;case"minCheckbox":e=k(f.find("input[name='"+l+"']")),m=T._minCheckbox(f,e,n,p,t);break;case"confirmed":void 0!==(m=T._confirmed(e,n,p,t))&&(u=!0);break;case"confirm":void 0!==(m=T._confirm(e,n,p,t))&&(u=!0);break;case"funcCall":m=T._funcCall(e,n,p,t);break;case"maxTag":u=!0,m=T._maxTag(e,n,p,t);break;case"minTag":u=!0,m=T._minTag(e,n,p,t);break;case"condRequired":void 0!==(m=T._condRequired(e,n,p,t))&&(u=!0);break;case"condRequire":void 0!==(m=T._condRequire(e,n,p,t))&&(u=!0)}var x,b,_,C=!1;if("object"==typeof m)switch(m.status){case"_break":C=!0;break;case"_error":m=m.message;break;case"_error_no_prompt":return!0}if(C)break;"string"==typeof m&&(s+=m+"<br/>",v++,!(t.isError=!0)!==i&&i.tab.length&&(!u&&!e.val()&&e.val().length<1||(b=(x=i.tab.parent().prev(".cck-tabs"))[0].id,_=!1,x.children().eq(i.pos).addClass("cck-tab-required"),(_=T._checkFieldDisplayStatus(x,!0))&&(x=k("#"+(b=_))),k("#"+b+" > .cck-tab-info").length||x.append('<li class="cck-tab-info"><span></span></li>'),k("#"+b+" > .cck-tab-info > span").html("object"==typeof t.allrules._tabs?t.allrules._tabs.alertText:""))))}!u&&!e.val()&&e.val().length<1&&(t.isError=!1);r=e.prop("type"),o=e.data("promptPosition")||t.promptPosition;("radio"==r||"checkbox"==r)&&1<f.find("input[name='"+l+"']").length&&(e=k("inline"===o?f.find("input[name='"+l+"'][type!=hidden]:last"):f.find("input[name='"+l+"'][type!=hidden]:first")),t.showArrow=!1),e.is(":hidden")&&t.prettySelect&&(e=f.find("#"+t.usePrefix+T._jqSelector(e.attr("id"))+t.useSuffix)),t.isError&&t.showPrompts?T._showPrompt(e,s,d,!1,t):T._closePrompt(e),e.trigger("jqv.field.result",[e,t.isError,s]);o=k.inArray(e[0],t.InvalidFields);return-1==o?t.isError&&t.InvalidFields.push(e[0]):t.isError||t.InvalidFields.splice(o,1),T._handleStatusCssClasses(e,t),t.isError&&t.onFieldFailure&&t.onFieldFailure(e),!t.isError&&t.onFieldSuccess&&t.onFieldSuccess(e),t.isError}},_handleStatusCssClasses:function(e,t){t.addSuccessCssClassToField&&e.removeClass(t.addSuccessCssClassToField),t.addFailureCssClassToField&&e.removeClass(t.addFailureCssClassToField),t.addSuccessCssClassToField&&!t.isError&&e.addClass(t.addSuccessCssClassToField),t.addFailureCssClassToField&&t.isError&&e.addClass(t.addFailureCssClassToField)},_required:function(e,t,a,i,r){switch(e.attr("type")){case"text":case"password":case"textarea":default:var o=k.trim(e.val()),n=k.trim(e.attr("data-validation-placeholder")),l=k.trim(e.attr("placeholder"));if(!o||n&&o==n||l&&o==l)return i.allrules[t[a]].alertText;break;case"file":var s=e.attr("id"),d=k("#"+s+"_hidden").val();if((!k.trim(e.val())||e.val()==e.attr("data-validation-placeholder"))&&(""==d||"/"==d[d.length-1]||k("#"+s+"_delete").length&&k("#"+s+"_delete").prop("checked")))return i.allrules[t[a]].alertText;break;case"radio":case"checkbox":if(r){if(!e.prop("checked"))return i.allrules[t[a]].alertTextCheckboxMultiple;break}d=e.closest("form, .validationEngineContainer"),s=e.attr("name");if(0==d.find("input[name='"+s+"']:checked").length)return 1==d.find("input[name='"+s+"']:visible").length?i.allrules[t[a]].alertTextCheckboxe:i.allrules[t[a]].alertTextCheckboxMultiple;break;case"select-one":if(!e.val())return i.allrules[t[a]].alertText;break;case"select-multiple":if(!e.find("option:selected").val())return i.allrules[t[a]].alertText}},_require:function(e,t,a,i,r){var o=t[a+1];switch(e.attr("type")){case"text":case"password":case"textarea":default:var n=k.trim(e.val()),l=k.trim(e.attr("data-validation-placeholder")),s=k.trim(e.attr("placeholder"));if(!n||l&&n==l||s&&n==s)return i.allrules[o].alertText;break;case"file":var d=e.attr("id"),u=k("#"+d+"_hidden").val();if((!k.trim(e.val())||e.val()==e.attr("data-validation-placeholder"))&&(""==u||"/"==u[u.length-1]||k("#"+d+"_delete").length&&k("#"+d+"_delete").prop("checked")))return i.allrules[o].alertText;break;case"radio":case"checkbox":u=e.closest("form, .validationEngineContainer"),d=e.attr("name");if(0==u.find("input[name='"+d+"']:checked").length)return i.allrules[o].alertText;break;case"select-one":if(!e.val())return i.allrules[o].alertText;break;case"select-multiple":if(!e.find("option:selected").val())return i.allrules[o].alertText}},_groupRequired:function(e,t,a,i){var r="["+i.validateAttribute+"*="+t[a+1]+"]",o=!1;if(e.closest("form, .validationEngineContainer").find(r).each(function(){if(!T._required(k(this),t,a,i))return!(o=!0)}),!o)return i.allrules[t[a]].alertText},_groupRequire:function(e,t,a,i){var r="["+i.validateAttribute+"*="+t[a+1]+"]",o=!1;if(e.closest("form, .validationEngineContainer").find(r).each(function(){if(!T._require(k(this),t,a,i))return!(o=!0)}),!o)return i.allrules[t[a+1]].alertText},_custom:function(e,t,a,i){var r=t[a+1],o=i.allrules[r];if(o)if(o.regex){var n=o.regex;if(n)return new RegExp(n).test(e.val())?void 0:i.allrules[r].alertText;alert("jqv:custom regex not found - "+r)}else if(o.func){if("function"==typeof(o=o.func))return o(e,t,a,i)?void 0:i.allrules[r].alertText;alert("jqv:custom parameter 'function' is no function - "+r)}else alert("jqv:custom type not allowed "+r);else alert("jqv:custom rule not found - "+r)},_funcCall:function(e,t,a,i){var r,o=t[a+1];if(-1<o.indexOf(".")){for(var n=o.split("."),l=window;n.length;)l=l[n.shift()];r=l}else r=window[o]||i.customFunctions[o];if("function"==typeof r)return r(e,t,a,i)},_confirmed:function(e,t,a,i){a=t[a+1];if(e.val()!=k("#"+a).val())return i.allrules.confirmed.alertText},_confirm:function(e,t,a,i){t=t[a+1],a=i.allrules[t].regex;if(e.val()!=k("#"+a).val())return i.allrules[t].alertText},_maxSize:function(e,t,a,i){a=t[a+1];if(a<e.val().length){i=i.allrules.maxSize;return i.alertText+a+i.alertText2}},_minSize:function(e,t,a,i){a=t[a+1];if(e.val().length<a){i=i.allrules.minSize;return i.alertText+a+i.alertText2}},_min:function(e,t,a,i){a=parseFloat(t[a+1]);if(parseFloat(e.val())<a){i=i.allrules.min;return i.alertText2?i.alertText+a+i.alertText2:i.alertText+a}},_max:function(e,t,a,i){a=parseFloat(t[a+1]);if(a<parseFloat(e.val())){i=i.allrules.max;return i.alertText2?i.alertText+a+i.alertText2:i.alertText+a}},_past:function(e,t,a,i,r){var o,i=a[i+1],e=k(e.find("*[name='"+i.replace(/^#+/,"")+"']"));if("now"==i.toLowerCase())o=new Date;else if(null!=e.val()){if(e.is(":disabled"))return;o=T._parseDate(e.val())}else o=T._parseDate(i);if(o<T._parseDate(t.val())){r=r.allrules.past;return r.alertText2?r.alertText+T._dateToString(o)+r.alertText2:r.alertText+T._dateToString(o)}},_isFuture:function(e,t,a,i,r){var o,n=a[i+1],l=r.allrules[n].regex,e=k(e.find("*[name='"+l.replace(/^#+/,"")+"']"));if("now"==l.toLowerCase())o=new Date;else if(null!=e.val()){if(e.is(":disabled"))return;o=T._parseDate(e.val())}else o=T._parseDate(l);if(T._parseDate(t.val())<o){n=a[i+1];return r.allrules[n].alertText}},_future:function(e,t,a,i,r){var o,i=a[i+1],e=k(e.find("*[name='"+i.replace(/^#+/,"")+"']"));if("now"==i.toLowerCase())o=new Date;else if(null!=e.val()){if(e.is(":disabled"))return;o=T._parseDate(e.val())}else o=T._parseDate(i);if(T._parseDate(t.val())<o)return r.allrules.future.alertText},_isDate:function(e){return new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/).test(e)},_isDateTime:function(e){return new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/).test(e)},_dateCompare:function(e,t){return new Date(e.toString())<new Date(t.toString())},_dateRange:function(e,t,a,i){return!(!i.firstOfGroup[0].value&&i.secondOfGroup[0].value||i.firstOfGroup[0].value&&!i.secondOfGroup[0].value)&&T._isDate(i.firstOfGroup[0].value)&&T._isDate(i.secondOfGroup[0].value)&&T._dateCompare(i.firstOfGroup[0].value,i.secondOfGroup[0].value)?void 0:i.allrules[t[a]].alertText+i.allrules[t[a]].alertText2},_dateTimeRange:function(e,t,a,i){return!(!i.firstOfGroup[0].value&&i.secondOfGroup[0].value||i.firstOfGroup[0].value&&!i.secondOfGroup[0].value)&&T._isDateTime(i.firstOfGroup[0].value)&&T._isDateTime(i.secondOfGroup[0].value)&&T._dateCompare(i.firstOfGroup[0].value,i.secondOfGroup[0].value)?void 0:i.allrules[t[a]].alertText+i.allrules[t[a]].alertText2},_maxCheckbox:function(e,t,a,i,r){i=a[i+1],t=t.attr("name");if(i<e.find("input[name='"+t+"']:checked").length)return r.showArrow=!1,r.allrules.maxCheckbox.alertText2?r.allrules.maxCheckbox.alertText+" "+i+" "+r.allrules.maxCheckbox.alertText2:r.allrules.maxCheckbox.alertText},_minCheckbox:function(e,t,a,i,r){i=a[i+1],t=t.attr("name");if(e.find("input[name='"+t+"']:checked").length<i)return r.showArrow=!1,r.allrules.minCheckbox.alertText+" "+i+" "+r.allrules.minCheckbox.alertText2},_maxTag:function(e,t,a,i){e=e.attr("id"),a=t[a+1];if(a<k("#"+e).textext()[0].tags().tagElements().length)return i.allrules.maxTag.alertText+" "+a+" "+i.allrules.maxTag.alertText2},_minTag:function(e,t,a,i){e=e.attr("id"),a=t[a+1];if(k("#"+e).textext()[0].tags().tagElements().length<a)return i.allrules.minTag.alertText+" "+a+" "+i.allrules.minTag.alertText2},_ajax:function(e,t,a,n){var i=t[a+1],l=n.allrules[i],t=l.extraData,i=l.extraDataDynamic,r={fieldId:e.attr("id"),fieldValue:e.val().replace(/</g,"%26lt;").replace(/>/g,"%26gt;").replace(/'/g,"%27")};if("object"==typeof t)k.extend(r,t);else if("string"==typeof t)for(var o=t.split("&"),a=0;a<o.length;a++){var s=o[a].split("=");s[0]&&s[0]&&(r[s[0]]=s[1])}if(i)for(var d=String(i).split(","),a=0;a<d.length;a++){var u,c=d[a];k(c).length&&(u=e.closest("form, .validationEngineContainer").find(c).val(),c.replace("#",""),escape(u),r[c.replace("#","")]=u)}if("field"==n.eventTrigger&&delete n.ajaxValidCache[e.attr("id")],!n.isError&&!T._checkAjaxFieldStatus(e.attr("id"),n))return k.ajax({type:n.ajaxFormValidationMethod,url:l.url,cache:!1,dataType:"json",data:r,field:e,rule:l,methods:T,options:n,beforeSend:function(){},error:function(e,t){T._ajaxError(e,t)},success:function(e){var t,a,i,r=e[0],o=k("#"+r).eq(0);1==o.length&&(t=e[1],a=e[2],t?(n.ajaxValidCache[r]=!0,a?n.allrules[a]&&(i=n.allrules[a].alertTextOk)&&(a=i):a=l.alertTextOk,n.showPrompts&&(a?T._showPrompt(o,a,"pass",!0,n):T._closePrompt(o)),"submit"==n.eventTrigger&&void 0!==n.submitTask&&(""==n.submitFct&&""==n.submitTask?(JCck.Core.executeFunctionByName(n.submitPkg,window),JCck.Core.executeFunctionByName(n.submitPkg,window)):(JCck[n.submitPkg][n.submitFct](n.submitTask),JCck[n.submitPkg][n.submitFct](n.submitTask)))):(n.ajaxValidCache[r]=!1,n.isError=!0,a?n.allrules[a]&&(i=n.allrules[a].alertText)&&(a=i):a=l.alertText,n.showPrompts&&T._showPrompt(o,a,"",!0,n))),o.trigger("jqv.field.result",[o,n.isError,a])}}),l.alertTextLoad},_ajaxError:function(e,t){0==e.status&&null==t?alert("The page is not served from a server! ajax call failed"):"undefined"!=typeof console&&console.log("Ajax error: "+e.status+" "+t)},_dateToString:function(e){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},_parseDate:function(e){var t=e.split(" "),a=[];t!=e&&(e=t[0],a=t[1].split(":"));t=e.split("-");return t==e&&(t=e.split("/")),a.length?new Date(t[0],t[1]-1,t[2],a[0],a[1]-1,a[2]):new Date(t[0],t[1]-1,t[2])},_showPrompt:function(e,t,a,i,r,o){var n=T._getPrompt(e);o&&(n=!1),k.trim(t)&&(n?T._updatePrompt(e,n,t,a,i,r):T._buildPrompt(e,t,a,i,r))},_buildPrompt:function(e,t,a,i,r){var o=k("<div>");switch(o.addClass(T._getClassName(e.attr("id"))+"formError"),o.addClass("parentForm"+T._getClassName(e.closest("form, .validationEngineContainer").attr("id"))),o.addClass("formError"),a){case"pass":o.addClass("greenPopup");break;case"load":o.addClass("blackPopup")}i&&o.addClass("ajaxed");k("<div>").addClass("formErrorContent").html(t).appendTo(o);t=e.data("promptPosition")||r.promptPosition;if(r.showArrow){var n,l=k("<div>").addClass("formErrorArrow");switch("string"==typeof t&&-1!=(n=t.indexOf(":"))&&(t=t.substring(0,n)),t){case"bottomLeft":case"bottomRight":o.find(".formErrorContent").before(l),l.addClass("formErrorArrowBottom").html('<div class="line1">\x3c!-- --\x3e</div><div class="line2">\x3c!-- --\x3e</div><div class="line3">\x3c!-- --\x3e</div><div class="line4">\x3c!-- --\x3e</div><div class="line5">\x3c!-- --\x3e</div><div class="line6">\x3c!-- --\x3e</div><div class="line7">\x3c!-- --\x3e</div><div class="line8">\x3c!-- --\x3e</div><div class="line9">\x3c!-- --\x3e</div><div class="line10">\x3c!-- --\x3e</div>');break;case"topLeft":case"topRight":l.html('<div class="line10">\x3c!-- --\x3e</div><div class="line9">\x3c!-- --\x3e</div><div class="line8">\x3c!-- --\x3e</div><div class="line7">\x3c!-- --\x3e</div><div class="line6">\x3c!-- --\x3e</div><div class="line5">\x3c!-- --\x3e</div><div class="line4">\x3c!-- --\x3e</div><div class="line3">\x3c!-- --\x3e</div><div class="line2">\x3c!-- --\x3e</div><div class="line1">\x3c!-- --\x3e</div>'),o.append(l)}}return r.addPromptClass&&o.addClass(r.addPromptClass),o.css({opacity:0}),!r.isOverflown&&"inline"!==t||"button"==e[0].type?(k("body").append(o),n=T._calculatePositionBody(e,o,r),o.css({position:"inline"===t?"relative":"absolute",top:n.callerTopPosition,left:n.callerLeftPosition,marginTop:n.marginTopSize,opacity:0}).data("callerField",e)):"inline"===t?(o.addClass("inline"),void 0!==e.attr("data-prompt-target")&&0<k("#"+e.attr("data-prompt-target")).length?o.appendTo(k("#"+e.attr("data-prompt-target"))):e.after(o),n=T._calculatePosition(e,o,r),o.css({position:"inline"===t?"relative":"absolute",top:n.callerTopPosition,left:n.callerLeftPosition,marginTop:n.marginTopSize,opacity:0}).data("callerField",e)):"checkbox"==e[0].type?(e.before(o),n=T._calculatePosition(e,o,r),o.css({position:"inline"===t?"relative":"absolute",top:n.callerTopPosition,left:"-16px",marginTop:"-20px",opacity:0}).data("callerField",e)):(e.before(o),n=T._calculatePosition(e,o,r),o.css({position:"inline"===t?"relative":"absolute",top:"auto",bottom:"100%",right:0,left:"auto",marginTop:n.marginTopSize,opacity:0,"min-width":"166px"}).data("callerField",e),o.addClass("formErrorArrowRight")),r.autoHidePrompt&&setTimeout(function(){o.animate({opacity:0},function(){o.closest(".formErrorOuter").remove(),o.remove()})},r.autoHideDelay),o.animate({opacity:.87})},_updatePrompt:function(e,t,a,i,r,o,n){var l;t&&(void 0!==i&&("pass"==i?t.addClass("greenPopup"):t.removeClass("greenPopup"),"load"==i?t.addClass("blackPopup"):t.removeClass("blackPopup")),r?t.addClass("ajaxed"):t.removeClass("ajaxed"),t.find(".formErrorContent").html(a),a=e.data("promptPosition")||o.promptPosition,l=!o.isOverflown&&"inline"!==a||"checkbox"==e[0].type||"button"==e[0].type?{top:(l=T._calculatePositionBody(e,t,o)).callerTopPosition,left:l.callerLeftPosition,marginTop:l.marginTopSize}:{top:"auto",bottom:"100%",left:"auto",right:0,marginTop:(l=T._calculatePosition(e,t,o)).marginTopSize},n?t.css(l):t.animate(l))},_closePrompt:function(e){var t=T._getPrompt(e);t&&t.fadeTo("fast",0,function(){t.parent(".formErrorOuter").remove(),t.remove()})},closePrompt:function(e){return T._closePrompt(e)},_getPrompt:function(e){var t=k(e).closest("form, .validationEngineContainer").attr("id"),e=T._getClassName(e.attr("id"))+"formError",t=k("."+T._escapeExpression(e)+".parentForm"+t)[0];if(t)return k(t)},_escapeExpression:function(e){return e.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g,"\\$1")},isRTL:function(e){var t=k(document),a=k("body"),a=e&&e.hasClass("rtl")||e&&"rtl"===(e.attr("dir")||"").toLowerCase()||t.hasClass("rtl")||"rtl"===(t.attr("dir")||"").toLowerCase()||a.hasClass("rtl")||"rtl"===(a.attr("dir")||"").toLowerCase();return Boolean(a)},_calculatePosition:function(e,t,a){var i,r,o,n,l=e.width(),s=e.position().left,d=e.position().top,u=(e.height(),o=0),c=-t.height(),f=e.data("promptPosition")||a.promptPosition,p="",v=0,a=0;switch("string"==typeof f&&-1!=f.indexOf(":")&&(p=f.substring(f.indexOf(":")+1),f=f.substring(0,f.indexOf(":")),-1!=p.indexOf(",")&&(n=p.substring(p.indexOf(",")+1),p=p.substring(0,p.indexOf(",")),a=parseInt(n),isNaN(a)&&(a=0)),v=parseInt(p),isNaN(p)&&(p=0)),f){default:case"topRight":r+=0,i+="100%";break;case"topLeft":u+=d,o+=s;break;case"centerRight":u=d+4,c=0,o=s+e.outerWidth(!0)+5;break;case"centerLeft":o=s-(t.width()+2),u=d+4,c=0;break;case"bottomLeft":u=d+e.height()+5,c=0,o=s;break;case"bottomRight":o=s+l-30,u=d+e.height()+5,c=0;break;case"inline":c=u=o=0}return{callerBottomPosition:i,callerTopPosition:(u+=a)+"px",callerLeftPosition:(o+=v)+"px",callerRightPosition:r+"px",marginTopSize:c+"px"}},_calculatePositionBody:function(e,t,a){var i,r,o,n=e.width(),l=t.height(),s=a.isOverflown;switch(o=s&&"button"!=e[0].type?(i=r=0,-l):(i=(o=e.offset()).top,r=o.left,"button"==e[0].type&&s?-l:0),a.promptPosition){default:case"topRight":s?r+=n-30:(r+=n-30,i+=-l);break;case"topLeft":i+=-l-10;break;case"centerRight":r+=n+13;break;case"bottomLeft":i=i+e.height()+15;break;case"bottomRight":r+=n-30,i+=e.height()+5}return{callerTopPosition:i+"px",callerLeftPosition:r+"px",marginTopSize:o+"px"}},_saveOptions:function(e,t){var a;k.validationEngineLanguage?a=k.validationEngineLanguage.allRules:k.error("jQuery.validationEngine rules are not loaded, plz add localization files to the page"),k.validationEngine.defaults.allrules=a;t=k.extend(!0,{},k.validationEngine.defaults,t);return t.formId=e.attr("id"),"adminForm"==t.formId?(t.submitPkg="Dev",t.submitFct="submit"):"seblod_form"==t.formId?(t.submitPkg="Core",t.submitFct="submit"):(t.submitPkg="Core",t.submitFct="submit_"+t.formId.replace("seblod_form_","")),e.data("jqv",t),t},_getClassName:function(e){if(e)return e.replace(/:/g,"_").replace(/\./g,"_")},_jqSelector:function(e){return e.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1")},_condRequired:function(e,t,a,i){for(var r,o=a+1;o<t.length;o++)if((r=jQuery("#"+t[o]).first()).length&&null==T._required(r,["required"],0,i,!0))return T._required(e,["required"],0,i)},_condRequire:function(e,t,a,i){for(var r,o=a+1;o<t.length-1;o++)if(r=i.allrules[t[o]],(r=jQuery("#"+r.regex).first()).length&&null==T._required(r,["required"],0,i,!0))return T._require(e,t,a,i)},_submitButtonClick:function(e){var t=k(this);t.closest("form, .validationEngineContainer").data("jqv_submitButton",t.attr("id"))}};k.fn.validationEngine=function(e,t){var a=k(this);return a[0]?"string"==typeof e&&"_"!=e.charAt(0)&&T[e]?("showPrompt"!=e&&"hide"!=e&&"hideAll"!=e&&T.init.apply(a),T[e].apply(a,Array.prototype.slice.call(arguments,1))):"object"!=typeof e&&e?void k.error("Method "+e+" does not exist in jQuery.validationEngine"):(T.init.apply(a,arguments),T.attach.apply(a)):a},k.validationEngine={fieldIdCounter:0,defaults:{validationEventTrigger:"blur",scroll:!0,focusFirstField:!0,showPrompts:!0,validateNonVisibleFields:!1,promptPosition:"topRight",bindMethod:"bind",inlineAjax:!1,ajaxFormValidation:!1,ajaxFormValidationURL:!1,ajaxFormValidationMethod:"get",onAjaxFormComplete:k.noop,onBeforeAjaxFormValidation:k.noop,onValidationComplete:!1,doNotShowAllErrosOnSubmit:!1,custom_error_messages:{},binded:!0,showArrow:!0,isError:!1,maxErrorsPerField:!1,ajaxValidCache:{},autoPositionUpdate:!1,InvalidFields:[],onFieldSuccess:!1,onFieldFailure:!1,onSuccess:!1,onFailure:!1,validateAttribute:"class",addSuccessCssClassToField:"",addFailureCssClassToField:"",autoHidePrompt:!1,autoHideDelay:1e4,fadeDuration:.3,prettySelect:!1,addPromptClass:"",usePrefix:"",useSuffix:"",showOneMessage:!1}},k(function(){k.validationEngine.defaults.promptPosition=T.isRTL()?"topLeft":"topRight"})}(jQuery);