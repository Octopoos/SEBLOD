/* Copyright (C) 2009 - 2017 SEBLOD. All Rights Reserved. */
if("undefined"===typeof JCck)var JCck={};
!function($){function myCheck(a,b){return $.inArray(a,b)>=0?1:0}function myModal(a){var b={};return b.modal=null,b.defaults={backclose:!0,backdrop:!0,body:!0,callbacks:{},class:"",close:!0,group:"ajax",header:!0,html:{close:'<button type="button" class="close" data-dismiss="modal"><span>Ã—</span></button>',loading:'<div class="loading"></div>',navigation:'<a class="prev" href="javascript:void(0);"><span><</span></a><a class="next" href="javascript:void(0);"><span>></span></a>'},keyboard:!0,loading:!0,loop:!1,mode:"ajax",navigation:!1,title:!0},b.settings=$.extend(b.defaults,a||{}),b.groups={ajax:[]},b.currentIndex=0,b.build=function(){return b.remove(),$("body").append('<div id="modal-cck" class="modal fade modal-'+b.settings.mode+(""!=b.settings.class?" "+b.settings.class:"")+'">'+(b.settings.navigation?'<div class="modal-navigation">'+b.settings.html.navigation+"</div>":"")+(b.settings.header?'<div class="modal-header">'+(b.settings.title?"<h3>"+(!0!==b.settings.title?b.settings.title:"")+"</h3>":"")+"</div>":"")+'<div class="modal-content">'+(b.settings.body?'<div class="modal-body"></div>':"")+"</div></div></div>"),b.modal=$("#modal-cck"),b.container=b.modal.find(b.settings.body?".modal-body":".modal-content"),b.settings.close&&$(b.settings.html.close).prependTo(b.settings.header?b.modal.find(".modal-header"):b.modal),b.modal.modal({show:!1,backdrop:0!=b.settings.backdrop&&(0!=b.settings.backclose||"static"),keyboard:b.settings.keyboard}),b.modal.on("show",function(a){a.stopPropagation(),b.callbacks.show(a)}),b.modal.on("shown",function(a){a.stopPropagation(),b.callbacks.shown(a)}),b.modal.on("hide",function(a){a.stopPropagation(),b.callbacks.hide(a)}),b.modal.on("hidden",function(a){a.stopPropagation(),b.callbacks.hidden(a)}),b},b.callbacks={show:function(a){void 0!==b.settings.callbacks.show&&b.settings.callbacks.show(a)},load:function(){b.container.empty(),b.settings.loading&&b.container.append(b.settings.html.loading),b.settings.navigation&&b.modal.find(".modal-navigation > a").addClass("hidden"),void 0!==b.settings.callbacks.load&&b.settings.callbacks.load()},loaded:function(){if(b.settings.loading&&b.container.find(".loading").remove(),b.settings.title){var a=b.modal.find("[data-cck-modal-title]");a.length&&b.modal.find(".modal-header h3").html(a.html())}b.settings.navigation&&b.groups[b.settings.group].length>1&&(b.settings.loop?b.modal.find(".modal-navigation > a").removeClass("hidden"):(0!=b.currentIndex&&b.modal.find(".modal-navigation > a.prev").removeClass("hidden"),b.currentIndex!=b.groups[b.settings.group].length-1&&b.modal.find(".modal-navigation > a.next.hidden").removeClass("hidden"))),void 0!==b.settings.callbacks.loaded&&b.settings.callbacks.loaded()},shown:function(a){var c=$(window).scrollTop();$(window).on("scroll",function(){$(document).scrollTop(c)}),b.settings.navigation&&(b.modal.find(".modal-navigation > a.prev").on("click",function(a){a.preventDefault(),b.loadPrev()}),b.modal.find(".modal-navigation > a.next").on("click",function(a){a.preventDefault(),b.loadNext()})),b.settings.keyboard&&$(document.documentElement).on("keyup",b.keyboardHandler),void 0!==b.settings.callbacks.shown&&b.settings.callbacks.shown(a)},hide:function(a){void 0!==b.settings.callbacks.hide&&b.settings.callbacks.hide(a)},hidden:function(a){$(window).off("scroll"),b.remove(),void 0!==b.settings.callbacks.hidden&&b.settings.callbacks.hidden(a)},destroy:function(){void 0!==b.settings.callbacks.destroy&&b.settings.callbacks.destroy(),b.remove(),b={},void 0!==b.settings.callbacks.destroyed&&b.settings.callbacks.destroyed()},destroyed:function(){void 0!==b.settings.callbacks.destroyed&&b.settings.callbacks.destroyed()}},b.destroy=function(){return b.callbacks.destroy(),this},b.hide=function(){return b.modal.modal("hide"),this},b.init=function(){return $.each(b.groups,function(a,c){$.each(c,function(c){$(this).off("click"),$(this).on("click",function(d){d.preventDefault();var e=$(this),f=e.attr("href");b.settings=$.extend(b.settings,e.data("cck-modal")||{}),b.settings.group=a,b.currentIndex=c,b.loadUrl(f)})})}),this},b.keyboardHandler=function(a){switch(a.preventDefault(),a.keyCode){case 27:b.hide()}if(b.settings.navigation)switch(a.keyCode){case 37:b.loadPrev();break;case 39:b.loadNext()}},b.load=function(a){switch(b.callbacks.load(),b.settings.mode){case"iframe":var c='<iframe src="'+a+'" width="100%" height="100%" frameborder="0"></iframe>';b.container.html(c),b.callbacks.loaded();break;case"image":var d='<img src="'+a+'" />';b.container.html(d),b.callbacks.loaded();break;default:b.container.load(a,b.callbacks.loaded)}return this},b.loadPrev=function(){if(0==b.currentIndex){if(!b.settings.loop)return this;b.currentIndex=b.groups[b.settings.group].length-1}else b.currentIndex--;return b.load($(b.groups[b.settings.group][b.currentIndex]).attr("href")),this},b.loadNext=function(){if(b.currentIndex==b.groups[b.settings.group].length-1){if(!b.settings.loop)return this;b.currentIndex=0}else b.currentIndex++;return b.load($(b.groups[b.settings.group][b.currentIndex]).attr("href")),this},b.loadUrl=function(a){$.each(b.groups.ajax,function(c,d){if(JCck.Core.sourceURI+d.attr("href")==a)return b.settings.group="ajax",b.currentIndex=c,!1}),b.build().load(a).show()},b.remove=function(){return $("body").find("#modal-cck").remove(),b.settings.keyboard&&$(document.documentElement).off("keyup",b.keyboardHandler),this},b.show=function(){return b.modal.modal("show"),this},b}function myOpposite(a){return 1==a?0:1}void 0===JCck.Core&&(JCck.Core={}),JCck.Core.doTask=function(a,b,c){void 0===c&&(c=document.getElementById("adminForm"));var d=c[a],e=b.split(".");if(d){for(var f=0;!0;f++){var g=c["cb"+f];if(!g)break;g.checked=!1}d.checked=!0,c.boxchecked.value=1,"update"==e[0]&&""!=e[1]&&(b=e[0],jQuery("#seblod_form").append('<input type="hidden" id="task2" name="task2" value="'+e[1]+'">')),Joomla.submitbutton(b)}return!1},JCck.Core.executeFunctionByName=function(a,b){for(var c=[].slice.call(arguments).splice(2),d=a.split("."),e=d.pop(),f=0;f<d.length;f++)b=b[d[f]];return b[e].apply(this,c)},JCck.Core.getModal=function(a){return myModal(a)},JCck.Core.submitForm=function(a,b){void 0===b&&(b=document.getElementById("adminForm")),void 0!==a&&""!==a&&(b.task.value=a),"function"==typeof b.onsubmit&&b.onsubmit(),"function"==typeof b.fireEvent&&b.fireEvent("onsubmit"),"function"!=typeof jQuery||"form.cancel"==a||"cancel"==a?b.submit():("search"==a&&jQuery("[data-cck-remove-before-search]","#"+b.id).removeAttr("name"),jQuery(b).submit())},JCck.Modals=[],$.fn.clearForm=function(){return this.each(function(){$(":input",this).each(function(){var a=this.type,b=this.tagName.toLowerCase();if("text"==a||"password"==a||"textarea"==b)this.value="";else if("hidden"==a)$(this)[0].hasAttribute("data-cck-keep-for-search")||(this.value="");else if("checkbox"==a||"radio"==a)this.checked=!1;else if("select-multi"==a||"select-multiple"==a)this.selectedIndex=-1;else if("select"==b){for(var c=0,d=0;d<this.options.length;d++)if(""==this.options[d].value){c=1;break}c?this.value="":this.selectedIndex=0}})})},$.fn.conditionalState=function(a){var b=$(this),c=a.rule||"";if(a.conditions.length>1){var d="or"==c?1:a.conditions.length,e={};jQuery.each(a.conditions,function(c,f){var g=$("#"+f.trigger);if(f.trigger&&null!=g){var i=f.type;if("isChanged"==i)i="change";else if("isPressed"==i)i="click";else if("isSubmitted"==i)i="keypress";else{e[g.attr("id")]=parseInt(g.myConditional(f.type,f));var j=0;jQuery.each(e,function(a,b){1==b&&j++}),h=j>=d?1:0,jQuery.each(a.states,function(a,c){b.myState(0,h,c.type,c)}),i="change"}g.on(i,function(c){if("keypress"!=i||13==c.which){e[g.attr("id")]=parseInt(g.myConditional(f.type,f));var j=0;jQuery.each(e,function(a,b){1==b&&j++}),h=j>=d?1:0,jQuery.each(a.states,function(a,c){b.myState(1,h,c.type,c)})}})}})}else{var f=$("#"+a.conditions[0].trigger);if(a.conditions[0].trigger&&null!=f){var g=a.conditions[0].type;if("isChanged"==g)g="change";else if("isPressed"==g)g="click";else if("isSubmitted"==g)g="keypress";else{var h=f.myConditional(a.conditions[0].type,a.conditions[0]);jQuery.each(a.states,function(a,c){b.myState(0,h,c.type,c)}),g="change"}f.on(g,function(c){if("keypress"!=g||13==c.which){var d=f.myConditional(a.conditions[0].type,a.conditions[0]);jQuery.each(a.states,function(a,c){b.myState(1,d,c.type,c)})}})}}},$.fn.conditionalStateLegacy=function(a){var b=$("#"+a.conditions._0isEqual.trigger),c=$(this);if(a.conditions._0isEqual.trigger&&null!=b){var d=b.myConditional("isEqual",a.conditions._0isEqual);jQuery.each(a.states,function(a,b){c.myState(0,d,a.substr(2),b)}),b.on("change",function(){var d=b.myConditional("isEqual",a.conditions._0isEqual);jQuery.each(a.states,function(a,b){c.myState(1,d,a.substr(2),b)})})}},$.fn.conditionalStates=function(a){var b=$(this),c=a.length;if(void 0===c)a.rule?b.conditionalState(a):b.conditionalStateLegacy(a);else for(var d=0;d<c;d++)a[d].rule?b.conditionalState(a[d]):b.conditionalStateLegacy(a[d])},$.fn.deepestHeight=function(){var a=0;$(this).each(function(){a=Math.max(a,$(this).height())}).height(a)},$.fn.isStillReady=function(){return!$(this).hasClass("busy")&&($(this).addClass("busy"),!0)},$.fn.myAttr=function(a){var b=$(this);if(b.is("select"))var c=$.trim(b.find("option:selected").attr(a));else if(b.is("fieldset"))var c=$.trim(b.find("input:checked").attr(a));else var c=$.trim(b.attr(a));return c},$.fn.myConditional=function(a,b){var c=this.attr("id"),d=0;if(!$(this).length)return 0;switch(a){case"callFunction":var e=b.value;window[e]&&(d=window[e]());break;case"isChanged":case"isPressed":return 1;case"isFilled":case"isEmpty":void 0!==$(this).myVal()&&null!==$(this).myVal()&&""!=$(this).myVal()&&(d=1),"isEmpty"==a&&(d=myOpposite(d));break;case"isEqual":case"isDifferent":default:var f=b.value.split(",");if("FIELDSET"==this[0].tagName){var g="";$("#"+c+" input:checked").length>1?$("#"+c+" input:checked").each(function(){g=parseInt(myCheck($(this).val(),f)),d+=g}):(1==$("#"+c+" input:checked").length&&(g=$("#"+c+" input:checked").val()),d=myCheck(g,f))}else d=myCheck(this.val(),f);d=d>0?1:0,"isDifferent"==a&&(d=myOpposite(d))}return d},$.fn.myState=function(a,b,c,d){var e=this.attr("id")+d.selector,f=d.value,g="0"==d.revert?0:1;switch(c){case"hasClass":case"hasNotClass":"hasNotClass"==c&&(b=myOpposite(b),g=1),1==b?$("#"+e).addClass(f):g&&$("#"+e).removeClass(f);break;case"isEnabled":case"isDisabled":"isDisabled"==c&&(b=myOpposite(b),g=1),1==b?$("#"+e).prop("disabled",!1):g&&$("#"+e).prop("disabled",!0);break;case"isFilled":case"isFilledBy":case"isEmpty":"isEmpty"==c&&(b=myOpposite(b),g=1);var h=$("#"+e).attr("id"),i="";if(1==b){if("isFilledBy"==c){var j=f.split("@");f=j[1]?$("#"+j[0]).myAttr(j[1]):$("#"+f).myVal()}i=$("#"+e).is(":input")||$("#"+e).is("fieldset")?"myVal":"text",$("#"+e)[i](f),$("#_"+h).length&&(i=$("#_"+h).is(":input")?"myVal":"text",$("#_"+h)[i](f))}else g&&(i=$("#"+e).is(":input")||$("#"+e).is("fieldset")?"val":"text",$("#"+e)[i](""),$("#_"+h).length&&(i=$("#_"+h).is(":input")?"val":"text",$("#_"+h)[i]("")));break;case"isComputed":break;case"triggers":var h=$("#"+e).attr("id");$("#"+h).trigger(f);break;case"isVisible":case"isHidden":default:"isHidden"==c&&(b=myOpposite(b),g=1),0==a&&(f=""),1==b?"fade"==f?$("#"+e).fadeIn():"slide"==f?$("#"+e).slideDown():$("#"+e).show():g&&("fade"==f?$("#"+e).fadeOut():"slide"==f?$("#"+e).slideUp():$("#"+e).hide())}},$.fn.myClear=function(a){if(this[0]){var b=this[0];if("FIELDSET"==b.tagName)1==arguments.length?$("#"+this.attr("id")+" input:checked").each(function(){a==$(this).val()&&$("#"+$(this).attr("id")).prop("checked",!1)}):$("#"+this.attr("id")+" input").prop("checked",!1);else if("SELECT"==b.tagName&&this.prop("multiple"))this.val("");else if("SELECT"!=b.tagName||this.prop("multiple"))this.val("");else{for(var c=0,d=0;d<b.options.length;d++)if(""==b.options[d].value){c=1;break}c?this.val(""):b.selectedIndex=0}}},$.fn.myVal=function(a){if(1==arguments.length)var b=1;else var b=0,a="";if(!this[0])return"";var c=this[0];if("FIELDSET"!=c.tagName&&"DIV"!=c.tagName)return"SELECT"==c.tagName&&this.prop("multiple")?b?a?this.val(a.split(",")):this.val(a):this.val():b?this.val(a):this.val();var d="#"+this.attr("id"),e="";if(a)$(d+" input").val(a.split(","));else{if($(d+" input:checked").length>1)return $(d+" input:checked").each(function(){e+=","+$(this).val()}),e.substr(1);if(1==$(d+" input:checked").length)return $(d+" input:checked").val()}},$.fn.CckModal=function(){var modals={},parents=[];$(this).each(function(i,e){var element=$(e),parent=!1;if(void 0!==element.data("cck-modal").parent)var parent=element.data("cck-modal").parent;var group=void 0!==element.data("cck-modal").mode?element.data("cck-modal").mode:"ajax";if(void 0!==element.data("cck-modal").group&&(group=element.data("cck-modal").group),void 0!==element.data("cck-modal").parent){var parent=element.data("cck-modal").parent;parents.indexOf(parent)>-1||parents.push(parent),void 0===eval(parent).groups[group]&&(eval(parent).groups[group]=[]),eval(parent).groups[group].push(element)}else void 0===modals[group]&&(modals[group]=[]),modals[group].push(element)}),$.each(parents,function(i,e){eval(e).init()}),$.each(modals,function(a,b){var c=myModal();c.groups[a]=b,c.init()})},$(document).ready(function(){$("a[data-cck-modal]").CckModal()})}(jQuery);