/* Copyright (C) 2013 SEBLOD. All Rights Reserved. */
if("undefined"==typeof JCck)var JCck={};!function(e){function t(t,n){return e.inArray(t,n)>=0?1:0}function n(t){var n={};return n.parent=!1,n.modal=null,n.defaults={backdrop:!0,body:!0,callbacks:{},"class":"",close:"button-outside",header:!0,html_navigation:'<a class="cck-nav prev" href="#"><span><</span></a><a class="cck-nav next" href="#"><span>></span></a>',html_button:'<button type="button" class="close" data-dismiss="modal"><span>x</span></button>',keyboard:!1,loading:!0,loop:!1,mode:"ajax",navigation:!1,style:"standard",title:!1},n.settings=e.extend(n.defaults,t||{}),n.elements=[],n.currentIndex=0,n.build=function(){return n.remove(),"extended"==n.settings.style||n.settings.navigation?(e("body").append('<div id="modal-remote-parent" class="modal-remote-parent">'+(n.settings.navigation?'<div class="modal-navigation-parent"><div class="modal-navigation-positioning"><div class="modal-navigation-container">'+n.settings.html_navigation+"</div></div></div>":"")+'<div class="modal-remote-positioning"><div class="modal-remote-container"><div id="modal-remote" class="modal fade '+n.settings["class"]+'">'+("outside"!=n.settings.close?n.settings.html_button:"")+(n.settings.header?'<div class="modal-header"><h3>'+(n.settings.title?n.settings.title:"")+"</h3></div>":"")+'<div class="modal-content"><div class="modal-body">'+(n.settings.loading?'<div class="loading"></div>':"")+"</div></div></div></div></div>"),n.parent=e("#modal-remote-parent")):e("body").append('<div id="modal-remote" class="modal fade '+n.settings["class"]+'">'+("outside"!=n.settings.close?n.settings.html_button:"")+(n.settings.header?'<div class="modal-header"><h3>'+(n.settings.title?n.settings.title:"")+"</h3></div>":"")+'<div class="modal-content"><div class="modal-body">'+(n.settings.loading?'<div class="loading"></div>':"")+"</div></div></div>"),n.modal=e("#modal-remote"),n.modal.modal({show:!1,backdrop:n.settings.backdrop}),n.modal.on("show",function(e){e.stopPropagation(),n.callbacks.show()}),n.modal.on("shown",function(e){e.stopPropagation(),n.callbacks.shown()}),n.modal.on("hide",function(e){e.stopPropagation(),n.callbacks.hide()}),n.modal.on("hidden",function(e){e.stopPropagation(),n.callbacks.hidden()}),n},n.callbacks={show:function(){console.log("show"),n.parent&&n.parent.find("a.cck-nav").addClass("no-nav"),"undefined"!=typeof n.settings.callbacks.show&&n.settings.callbacks.show()},load:function(){console.log("load"),n.parent&&n.parent.find("a.cck-nav").addClass("no-nav"),"undefined"!=typeof n.settings.callbacks.load&&n.settings.callbacks.load()},loaded:function(){console.log("loaded"),n.parent&&n.elements.length>1&&(n.settings.loop?n.parent.find("a.cck-nav").removeClass("no-nav"):(0!=n.currentIndex&&n.parent.find("a.cck-nav.prev").removeClass("no-nav"),n.currentIndex!=n.elements.length-1&&n.parent.find("a.cck-nav.next").removeClass("no-nav"))),"undefined"!=typeof n.settings.callbacks.loaded&&n.settings.callbacks.loaded()},shown:function(){console.log("shown"),e("body").css("overflow","hidden"),"button"!=n.settings.close&&e('.modal-remote-container, [class*="modal-navigation-"]').on("click",function(t){e(this).is(t.target)&&n.hide()}),n.settings.navigation&&(n.parent&&(n.parent.find("a.cck-nav.prev").on("click",function(e){e.preventDefault(),n.loadPrev()}),n.parent.find("a.cck-nav.next").on("click",function(e){e.preventDefault(),n.loadNext()})),n.settings.keyboard&&e(document.documentElement).on("keyup",n.keyboardHandler)),"undefined"!=typeof n.settings.callbacks.shown&&n.settings.callbacks.shown()},hide:function(){console.log("hide"),"undefined"!=typeof n.settings.callbacks.hide&&n.settings.callbacks.hide()},hidden:function(){console.log("hidden"),e("body").css("overflow","visible"),n.remove(),"undefined"!=typeof n.settings.callbacks.hidden&&n.settings.callbacks.hidden()},destroy:function(){console.log("destroy"),"undefined"!=typeof n.settings.callbacks.destroy&&n.settings.callbacks.destroy(),n.remove(),n={},console.log("destroyed"),"undefined"!=typeof n.settings.callbacks.destroyed&&n.settings.callbacks.destroyed()},destroyed:function(){console.log("destroyed"),"undefined"!=typeof n.settings.callbacks.destroyed&&n.settings.callbacks.destroyed()}},n.destroy=function(){return n.callbacks.destroy(),this},n.hide=function(){return n.modal.modal("hide"),this},n.init=function(){return n.elements.each(function(t){e(this).on("click",function(i){i.preventDefault();var a=e(this),s=a.attr("href");n.settings=e.extend(n.settings,a.data("cck-modal")||{}),n.loadRemote(s),n.currentIndex=t})}),this},n.keyboardHandler=function(e){switch(e.preventDefault(),e.keyCode){case 37:n.loadPrev();break;case 39:n.loadNext();break;case 88:n.hide()}},n.load=function(e){n.callbacks.load();var t=n.modal.find(".modal-content");switch(n.settings.mode){case"iframe":var i='<iframe src="'+e+'" width="100%" height="auto" frameborder="0"></iframe>';n.settings.body?t.find(".modal-body").append(i):(t.find(".modal-body").remove(),t.append(i)),n.settings.loading&&t.find(".loading").remove(),n.callbacks.loaded();break;default:n.settings.body?t.find(".modal-body").load(e,n.callbacks.loaded):t.load(e,n.callbacks.loaded)}return this},n.loadPrev=function(){if(0==n.currentIndex){if(!n.settings.loop)return this;n.currentIndex=n.elements.length-1}else n.currentIndex--;return n.load(e(n.elements[n.currentIndex]).attr("href")),this},n.loadNext=function(){if(n.currentIndex==n.elements.length-1){if(!n.settings.loop)return this;n.currentIndex=0}else n.currentIndex++;return n.load(e(n.elements[n.currentIndex]).attr("href")),this},n.loadRemote=function(e){n.build().load(e).show()},n.remove=function(){return n.parent?e("body").find("#modal-remote-parent").remove():e("body").find("#modal-remote").remove(),n.settings.keyboard&&e(document.documentElement).off("keyup",n.keyboardHandler),this},n.show=function(){return n.modal.modal("show"),this},n}function i(e){return 1==e?0:1}"undefined"==typeof JCck.Core&&(JCck.Core={}),JCck.Core.doTask=function(e,t,n){"undefined"==typeof n&&(n=document.getElementById("adminForm"));var i=n[e],a=t.split(".");if(i){for(var s=0;!0;s++){var o=n["cb"+s];if(!o)break;o.checked=!1}i.checked=!0,n.boxchecked.value=1,"update"==a[0]&&""!=a[1]&&(t=a[0],jQuery("#seblod_form").append('<input type="hidden" id="task2" name="task2" value="'+a[1]+'">')),Joomla.submitbutton(t)}return!1},JCck.Core.executeFunctionByName=function(e,t){for(var n=[].slice.call(arguments).splice(2),i=e.split("."),a=i.pop(),s=0;s<i.length;s++)t=t[i[s]];return t[a].apply(this,n)},JCck.Core.getModal=function(t){var i=n(t);return i.elements=e(this),i.init(e(this)),i},JCck.Core.submitForm=function(e,t){"undefined"==typeof t&&(t=document.getElementById("adminForm")),"undefined"!=typeof e&&""!==e&&(t.task.value=e),"function"==typeof t.onsubmit&&t.onsubmit(),"function"==typeof t.fireEvent&&t.fireEvent("onsubmit"),"function"==typeof jQuery&&jQuery(t).submit(),t.submit()},e.fn.clearForm=function(){return this.each(function(){e(":input",this).each(function(){var e=this.type,t=this.tagName.toLowerCase();"text"==e||"password"==e||"textarea"==t?this.value="":"checkbox"==e||"radio"==e?this.checked=!1:"select"==t&&(this.value="")})})},e.fn.conditionalState=function(t){var n=e(this),i=t.rule||"";if(t.conditions.length>1){var a="or"==i?1:t.conditions.length,s={};jQuery.each(t.conditions,function(i,o){var d=e("#"+o.trigger);if(o.trigger&&null!=d){var c=o.type;if("isChanged"==c)c="change";else if("isPressed"==c)c="click";else{s[d.attr("id")]=parseInt(d.myConditional(o.type,o));var r=0;jQuery.each(s,function(e,t){1==t&&r++}),l=r>=a?1:0,jQuery.each(t.states,function(e,t){n.myState(0,l,t.type,t)}),c="change"}d.live(c,function(){s[d.attr("id")]=parseInt(d.myConditional(o.type,o));var e=0;jQuery.each(s,function(t,n){1==n&&e++}),l=e>=a?1:0,jQuery.each(t.states,function(e,t){n.myState(1,l,t.type,t)})})}})}else{var o=e("#"+t.conditions[0].trigger);if(t.conditions[0].trigger&&null!=o){var d=t.conditions[0].type;if("isChanged"==d)d="change";else if("isPressed"==d)d="click";else{var l=o.myConditional(t.conditions[0].type,t.conditions[0]);jQuery.each(t.states,function(e,t){n.myState(0,l,t.type,t)}),d="change"}o.live(d,function(){var e=o.myConditional(t.conditions[0].type,t.conditions[0]);jQuery.each(t.states,function(t,i){n.myState(1,e,i.type,i)})})}}},e.fn.conditionalStateLegacy=function(t){var n=e("#"+t.conditions._0isEqual.trigger),i=e(this);if(t.conditions._0isEqual.trigger&&null!=n){var a=n.myConditional("isEqual",t.conditions._0isEqual);jQuery.each(t.states,function(e,t){i.myState(0,a,e.substr(2),t)}),n.live("change",function(){var e=n.myConditional("isEqual",t.conditions._0isEqual);jQuery.each(t.states,function(t,n){i.myState(1,e,t.substr(2),n)})})}},e.fn.conditionalStates=function(t){var n=e(this),i=t.length;if(void 0===i)t.rule?n.conditionalState(t):n.conditionalStateLegacy(t);else for(var a=0;i>a;a++)t[a].rule?n.conditionalState(t[a]):n.conditionalStateLegacy(t[a])},e.fn.deepestHeight=function(){var t=0;e(this).each(function(){t=Math.max(t,e(this).height())}).height(t)},e.fn.isStillReady=function(){return e(this).hasClass("busy")?!1:(e(this).addClass("busy"),!0)},e.fn.myAttr=function(t){var n=e(this);if(n.is("select"))var i=e.trim(n.find("option:selected").attr(t));else if(n.is("fieldset"))var i=e.trim(n.find("input:checked").attr(t));else var i=e.trim(n.attr(t));return i},e.fn.myConditional=function(n,a){var s=this.attr("id"),o=0;if(!e(this).length)return 0;switch(n){case"callFunction":var d=a.value;window[d]&&(o=window[d]());break;case"isChanged":case"isPressed":return 1;case"isFilled":case"isEmpty":void 0!==e(this).myVal()&&null!==e(this).myVal()&&""!=e(this).myVal()&&(o=1),"isEmpty"==n&&(o=i(o));break;case"isEqual":case"isDifferent":default:var l=a.value.split(",");if("FIELDSET"==this[0].tagName){var c="";e("#"+s+" input:checked").length>1?e("#"+s+" input:checked").each(function(){c=parseInt(t(e(this).val(),l)),o+=c}):(1==e("#"+s+" input:checked").length&&(c=e("#"+s+" input:checked").val()),o=t(c,l))}else o=t(this.val(),l);o=o>0?1:0,"isDifferent"==n&&(o=i(o))}return o},e.fn.myState=function(t,n,a,s){var o=this.attr("id")+s.selector,d=s.value,l="0"==s.revert?0:1;switch(a){case"hasClass":case"hasNotClass":"hasNotClass"==a&&(n=i(n),l=1),1==n?e("#"+o).addClass(d):l&&e("#"+o).removeClass(d);break;case"isEnabled":case"isDisabled":"isDisabled"==a&&(n=i(n),l=1),1==n?e("#"+o).prop("disabled",!1):l&&e("#"+o).prop("disabled",!0);break;case"isFilled":case"isFilledBy":case"isEmpty":"isEmpty"==a&&(n=i(n),l=1);var c=e("#"+o).attr("id"),r="";if(1==n){if("isFilledBy"==a){var u=d.split("@");d=u[1]?e("#"+u[0]).myAttr(u[1]):e("#"+d).myVal()}r=e("#"+o).is(":input")||e("#"+o).is("fieldset")?"myVal":"text",e("#"+o)[r](d),e("#_"+c).length&&(r=e("#_"+c).is(":input")?"myVal":"text",e("#_"+c)[r](d))}else l&&(r=e("#"+o).is(":input")||e("#"+o).is("fieldset")?"val":"text",e("#"+o)[r](""),e("#_"+c).length&&(r=e("#_"+c).is(":input")?"val":"text",e("#_"+c)[r]("")));break;case"isComputed":break;case"triggers":var c=e("#"+o).attr("id");e("#"+c).trigger(d);break;case"isVisible":case"isHidden":default:"isHidden"==a&&(n=i(n),l=1),0==t&&(d=""),1==n?"fade"==d?e("#"+o).fadeIn():"slide"==d?e("#"+o).slideDown():e("#"+o).show():l&&("fade"==d?e("#"+o).fadeOut():"slide"==d?e("#"+o).slideUp():e("#"+o).hide())}},e.fn.myVal=function(t){if(1==arguments.length)var n=1;else var n=0,t="";if(!this[0])return"";var i=this[0];if("FIELDSET"!=i.tagName&&"DIV"!=i.tagName)return"SELECT"==i.tagName&&this.prop("multiple")?n?this.val(t?t.split(","):t):this.val():n?this.val(t):this.val();var a="#"+this.attr("id"),s="";if(t)e(a+" input").val(t.split(","));else{if(e(a+" input:checked").length>1)return e(a+" input:checked").each(function(){s+=","+e(this).val()}),s.substr(1);if(1==e(a+" input:checked").length)return e(a+" input:checked").val()}},e.fn.CckModal=function(t){var i=n(t);return i.elements=e(this),i.init(e(this)),i},e(document).ready(function(){e("a[data-cck-modal]").CckModal()})}(jQuery);